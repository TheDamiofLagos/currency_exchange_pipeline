version: 2
sources:
  - name: open_exchange
    database: open-exchange-us
    schema: rates_raw
    tables:
      - name: open_exchange_currency_raw
        columns:
          - name: code
            data_tests:
              - not_null
          - name: _fivetran_synced
            data_tests:
              - not_null
          - name: _fivetran_deleted
            data_tests:
              - not_null
          - name: name
            data_tests:
              - not_null
        description: "This is a source table for dbt."
      - name: open_exchange_rates_raw
        columns:
          - name: currency_code
            description: "{{ doc('currency_code') }}"
            data_tests:
              - not_null
          - name: data_base
            description: "{{ doc('base_currency') }}"
            data_tests:
              - not_null
          - name: data_timestamps
            data_tests:
              - not_null
          - name: _fivetran_deleted
            data_tests:
              - not_null
          - name: _fivetran_synced
            data_tests:
              - not_null
          - name: rate
            description: "{{ doc('rate') }}"
            data_tests:
              - not_null
        description: "This is a source table for dbt."
        config:
          freshness:
            warn_after:
              count: 24
              period: hour
            error_after:
              count: 36
              period: hour
          loaded_at_field: _fivetran_synced
    